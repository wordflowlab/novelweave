---
description: 创建或更新小说创作宪法，定义不可妥协的创作原则
argument-hint: [创作原则描述]
---

用户输入：$ARGUMENTS

## 目标

建立小说创作的核心原则和价值观，形成创作的"宪法"文件。这些原则将指导后续所有创作决策。

## 严格模式（重要）

- 只生成“创作宪法”文档，绝对不要输出任何小说正文/章节内容
- 只允许创建/更新：`memory/constitution.md`，禁止创建其它路径的文件
- 将用户输入 `$ARGUMENTS` 视为创作偏好与原则来源，而非写作指令
- 如检测到用户描述像“写第一章/写小说/开头/正文”等，必须提示“当前命令仅用于创建宪法”，并继续产出宪法
- 默认不在对话中输出全文；直接使用 `write_to_file` 写入 `memory/constitution.md`，然后返回一行确认信息（除非用户明确要求预览全文）

## 项目结构检查

首先确保项目目录结构存在。使用 `execute_command` 工具执行：

```bash
mkdir -p memory stories spec/tracking
```

如果命令执行失败或不可用，使用 `write_to_file` 工具创建一个临时文件来间接创建目录结构。

## 执行步骤

### 1. 检查现有文档

**首先检查是否存在风格参考文档**（来自书籍分析）：

使用 `read_file` 工具尝试读取 `memory/style-reference.md`：

- 如果读取成功：告诉用户"✅ 检测到您已完成对标作品分析，我将参考该风格帮您起草宪法。"
- 如果读取失败（文件不存在）：继续下一步

**然后检查现有宪法**：

使用 `read_file` 工具尝试读取 `memory/constitution.md`：

- 如果读取成功：告诉用户"✅ 检测到现有宪法，准备更新"，并展示当前版本信息
- 如果读取失败（文件不存在）：告诉用户"📝 准备创建新的创作宪法"

### 1.5 加载外部模板（如有）

优先尝试加载 `memory/constitution-template.md` 作为生成基础：

- 如果存在：
    - 使用 `read_file` 读取 `memory/constitution-template.md`
    - 将其中的占位符（如 `[PROJECT_NAME]`、`[PRINCIPLE_1_NAME]` 等）作为待填内容
    - 基于 `$ARGUMENTS` 与第2步收集到的原则，替换或补全占位符
- 如果不存在：
    - 使用下方“内置结构模板”生成

### 2. 收集创作原则

基于用户输入（$ARGUMENTS），收集以下维度的原则。如果用户输入为空或不完整，通过提问补充：

#### 核心价值观

- 作品要传递什么核心理念？
- 什么是绝对不能违背的底线？
- 创作的根本目的是什么？

#### 质量标准

- 逻辑一致性要求
- 文字质量标准
- 更新频率承诺
- 完成度保证

#### 创作风格原则

- 叙事风格（简洁/华丽/朴实/诗意）
- 节奏控制（快速/缓慢/张弛有度）
- 情感基调（热血/深沉/轻松/严肃）
- 语言特色（古风/现代/口语/书面）

#### 内容原则

- **角色塑造原则**
    - 每个角色必须有完整动机
    - 角色成长必须符合逻辑
    - 对话必须符合角色身份
- **情节设计原则**
    - 冲突设计原则
    - 转折合理性要求
    - 伏笔回收原则
- **世界观原则**
    - 设定自洽性要求
    - 细节真实性标准
    - 文化考据要求

#### 读者导向原则

- 目标读者定位
- 读者体验保证
- 互动反馈原则

#### 创作纪律

- 日常写作规范
- 修改和完善流程
- 版本管理原则

### 3. 起草宪法文档

始终使用 `write_to_file` 将文档保存到 `memory/constitution.md`（唯一允许的输出路径）。

若存在 `memory/constitution-template.md`，请在其基础上完成填充；否则使用以下内置结构模板：

```markdown
# 小说创作宪法

## 元数据

- 版本：1.0.0
- 创建日期：[YYYY-MM-DD]
- 最后修订：[YYYY-MM-DD]
- 作者：[作者名]
- 作品：[作品名或"通用"]

## 前言

[阐述为什么需要这份宪法，以及它的约束力]

## 第一章：核心价值观

### 原则1：[原则名称]

**声明**：[原则的明确表述]
**理由**：[为什么这个原则重要]
**执行**：[如何在创作中体现]

### 原则2：[原则名称]

**声明**：[原则的明确表述]
**理由**：[为什么这个原则重要]
**执行**：[如何在创作中体现]

[更多核心原则...]

## 第二章：质量标准

### 标准1：逻辑一致性

**要求**：[具体要求]
**验证方法**：[如何验证]
**违反后果**：[必须修正]

### 标准2：文字质量

**要求**：[具体要求]
**验证方法**：[如何验证]
**违反后果**：[必须修正]

[更多质量标准...]

## 第三章：创作风格

### 风格原则1：[名称]

**定义**：[什么是这种风格]
**范例**：[具体例子]
**禁忌**：[绝对不要做什么]

[更多风格原则...]

## 第四章：内容规范

### 角色塑造规范

[具体规范内容]

### 情节设计规范

[具体规范内容]

### 世界观构建规范

[具体规范内容]

## 第五章：读者契约

### 对读者的承诺

- [承诺1]
- [承诺2]
- [承诺3]

### 底线保证

- [保证1]
- [保证2]

## 第六章：修订程序

### 修订触发条件

- 重大创作方向调整
- 读者反馈累积
- 个人成长和认识变化

### 修订流程

1. 提出修订动议
2. 评估影响
3. 更新版本
4. 记录变更

## 附录：版本历史

- v1.0.0 ([日期])：初始版本
```

### 4. 版本管理

- **主版本号**：重大原则变更或删除
- **次版本号**：新增原则或章节
- **修订号**：措辞优化、澄清说明

如果是更新现有宪法，相应增加版本号并在"版本历史"中记录变更。

### 5. 输出完成消息

创建或更新完成后，向用户展示：

```
✅ 创作宪法已保存到 memory/constitution.md（唯一输出文件）

📋 宪法影响报告（简要）
- 版本：[版本号] | 核心原则数：[数量]
- 影响范围：规格/计划/写作/验证全流程受约束

🔜 下一步建议（推荐流程）
1) /specify 定义故事规格（像 PRD）
2) /clarify 关键澄清（消除模糊）
3) /plan 制定创作计划（从规格到实现）
4) /tasks 生成任务清单（P0/P1/P2）
5) /write 执行写作（按任务）
6) /analyze 质量一致性分析
```

## 执行原则

### 必须遵守

- 原则必须是**可验证的**，不能太抽象
- 使用"必须"、"禁止"等**明确词汇**
- 每个原则都要有**明确的理由**

### 应该包含

- 至少 3-5 个核心价值观
- 明确的质量底线
- 可操作的创作规范

### 避免

- 空泛的口号（如"追求卓越"）
- 无法验证的要求
- 过度限制创意的条款

## 示例原则

**优秀的原则**：

- "主要角色的行为必须有明确的动机链，不得出现'因为剧情需要'的行为"
- "每个伏笔必须在合理时间内（最多10章）得到回收或解释"
- "绝不使用现代网络用语破坏古代背景的沉浸感"

**糟糕的原则**：

- "要写得好"（太模糊）
- "追求艺术性"（无法验证）
- "让读者满意"（标准不明）

## 后续流程

宪法确立后，所有后续创作步骤都需遵循：

1. `/specify` - 规格需符合宪法价值观
2. `/clarify` - 澄清决策时参考宪法
3. `/plan` - 计划需遵循宪法原则
4. `/tasks` - 任务分解遵循宪法
5. `/write` - 创作需遵守宪法规范
6. `/analyze` - 验证需检查宪法合规性

记住：**宪法是最高准则，但也可以与时俱进地修订。**
